import{a as I,k as S,f as m,v as T,z as k,x as B,aa as D,y as w,u as b}from"./framework.C3K8O85p.js";const r=I(null),l=I(null),x=(a,u)=>{let o=!1;return(...n)=>{o||(a(...n),o=!0,setTimeout(()=>o=!1,u))}},C=["draggable"],L=S({__name:"Draggable",props:{ceiling:{default:.8},floor:{default:.2},isDraggable:{type:Boolean,default:!0},isDroppable:{type:[Boolean,Function],default:!0},parentIds:{},id:{}},emits:["onDragEnd","onDragStart"],setup(a,{expose:u,emit:o}){const n=o,s=m(()=>a.parentIds.at(-1)??null),E=e=>{!e.dataTransfer||!(e.target instanceof HTMLElement)||!a.isDraggable||(e.target.classList.add("dragging"),e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move",r.value={id:a.id,parentId:s.value},n("onDragStart",{id:a.id,parentId:s.value}))},h=e=>typeof a.isDroppable=="function"?a.isDroppable(r.value,{id:a.id,parentId:s.value,offset:e}):a.isDroppable,g=x(e=>{var t,d;if(!r.value||r.value.id===a.id||a.parentIds.includes(((t=r.value)==null?void 0:t.id)??""))return;const f=(d=l.value)==null?void 0:d.offset,v=e.target.offsetHeight,c=a.floor*v,p=a.ceiling*v;let i=3;e.offsetY<=0&&f&&f!==3?i=f:e.offsetY<=c?i=0:e.offsetY>=p?i=1:e.offsetY>c&&e.offsetY<p&&(i=2),h(i)&&(l.value={id:a.id,parentId:s.value,offset:i})},25),Y=["above","below","asChild"],_=m(()=>{var e;let t="sidebar-indent-nested";return a.id===((e=l.value)==null?void 0:e.id)&&(t+=` dragover-${Y[l.value.offset]}`),t}),y=()=>{if(!l.value||!r.value)return;const e={...r.value},t={...l.value};r.value=null,l.value=null,document.querySelectorAll("div.dragging").forEach(d=>d.classList.remove("dragging")),e.id!==t.id&&n("onDragEnd",e,t)};return u({draggingItem:r,hoveredItem:l}),(e,t)=>(k(),T("div",{class:w(_.value),draggable:e.isDraggable,onDragend:y,onDragover:t[0]||(t[0]=D((...d)=>b(g)&&b(g)(...d),["prevent","stop"])),onDragstart:D(E,["stop"])},[B(e.$slots,"default",{},void 0,!0)],42,C))}}),z=(a,u)=>{const o=a.__vccOpts||a;for(const[n,s]of u)o[n]=s;return o},H=z(L,[["__scopeId","data-v-a89d6a6e"]]);export{H as m};

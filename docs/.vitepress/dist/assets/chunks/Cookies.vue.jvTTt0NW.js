import{k as g,f as V,C as h,z as p,a as E,w as F,D as u,U as d,K as _,A as b,u as f,e as I,a7 as O,v as M,F as q,P,a8 as R}from"./framework.ZtjFAS4N.js";import{z as U,j as B,aK as D,v as W,i as L,y as T,a as Z,at as G,q as H,S as J,k as N,ax as Q}from"./theme.ChnCFiOV.js";import{r as X}from"./EmptyState.vue.DY80-FjF.js";import{g as Y}from"./SidebarButton.vue.BBd7uyA6.js";import{_ as ee,p as ae}from"./SidebarListElement.vue.DzP-jfkY.js";import{u as oe}from"./ViewLayout.vue.15PgRoks.js";import{x as le}from"./ViewLayoutContent.vue.CyQhpgBs.js";import{q as se}from"./Form.vue.DqVQ3gad.js";import{h as te,b as y}from"./CommandActionInput.vue.Dlhp1Ac1.js";import"./ScalarAsciiArt.vue.CfbRXozR.js";import"./ScalarHotkey.vue.B4myrqFa.js";import"./Draggable.vue.BVx2gPV_.js";import"./DeleteSidebarListElement.vue.TO3Y4m4y.js";const ie=g({__name:"CookieForm",setup(C){const{activeCookieId:m}=U(),{cookies:v,cookieMutators:k}=B(),a=[{label:"Name",key:"name",placeholder:"session_id"},{label:"Value",key:"value",placeholder:"my-cookie-session-id"},{label:"Domain",key:"domain",placeholder:"example.com"}],c=V(()=>v[m.value]||D.parse({name:"",value:"",domain:"",path:""})),x=(i,e)=>{k.edit(m.value,i,e)};return(i,e)=>(p(),h(se,{data:c.value,onUpdate:x,options:a},null,8,["data"]))}}),ue={class:"flex h-8 items-start gap-2 text-sm"},ne={class:"flex h-8 items-start gap-2 text-sm"},de={class:"flex h-8 items-start gap-2 text-sm"},me=g({__name:"CookieModal",props:{state:{}},emits:["cancel","submit"],setup(C,{emit:m}){const v=C,k=m,a=E({name:"",value:"",domain:""}),{toast:c}=L(),x=()=>{if(!a.value.name||!a.value.value){c("Please fill in all fields before adding a cookie.","error");return}k("submit",a.value),v.state.hide()};return F(()=>v.state.open,i=>{i&&(a.value={name:"",value:"",domain:""})}),(i,e)=>(p(),h(f(W),{size:"xs",state:i.state,title:"Add Cookie"},{default:u(()=>[d(te,{disabled:!a.value.name||!a.value.value,onCancel:e[3]||(e[3]=n=>k("cancel")),onSubmit:x},{submit:u(()=>e[7]||(e[7]=[b("Add Cookie")])),default:u(()=>[_("div",ue,[e[4]||(e[4]=b(" Name: ")),d(y,{modelValue:a.value.name,"onUpdate:modelValue":e[0]||(e[0]=n=>a.value.name=n),autofocus:"",class:"!p-0",placeholder:"session_id"},null,8,["modelValue"])]),_("div",ne,[e[5]||(e[5]=b(" Value: ")),d(y,{modelValue:a.value.value,"onUpdate:modelValue":e[1]||(e[1]=n=>a.value.value=n),autofocus:"",class:"!p-0",placeholder:"my-cookie-session-id"},null,8,["modelValue"])]),_("div",de,[e[6]||(e[6]=b(" Domain: ")),d(y,{modelValue:a.value.domain,"onUpdate:modelValue":e[2]||(e[2]=n=>a.value.domain=n),autofocus:"",class:"!p-0",placeholder:"example.com"},null,8,["modelValue"])])]),_:1},8,["disabled"])]),_:1},8,["state"]))}}),ce=T(me,[["__scopeId","data-v-694018d6"]]),re={class:"flex-1"},pe={class:"relative mb-[.5px] last:mb-0"},Me=g({__name:"Cookies",setup(C){const{cookies:m,cookieMutators:v,events:k,workspaceMutators:a}=B(),{activeWorkspace:c,activeCookieId:x}=U(),i=Z(),e=G(),n=H(),j=s=>{var l,o;const t=D.parse({name:s.name,value:s.value,domain:s.domain,path:"/"});v.add(t),a.edit((l=c.value)==null?void 0:l.uid,"cookies",[...((o=c.value)==null?void 0:o.cookies)??[],t.uid]),i.push({name:"cookies",params:{cookies:t.uid}})},A=s=>{var l,o;v.delete(s),a.edit((l=c.value)==null?void 0:l.uid,"cookies",[...(((o=c.value)==null?void 0:o.cookies)??[]).filter(r=>r!==s)]);const t=Object.values(m).filter(r=>r.uid!==s);if(t.length>0){const r=t[t.length-1];r&&i.push(r.uid)}else i.push({name:"cookies",params:{[N.Cookies]:"default"}})},w=()=>{n.show()},$=s=>{s!=null&&s.createNew&&e.name==="cookies"&&w()},K=(s,l)=>{var o;const t={name:"cookies",params:{workspace:((o=c.value)==null?void 0:o.uid)??"default",cookies:l}};if(s.metaKey){const r=i.resolve(t).href;window.open(r,"_blank");return}i.push(t)};I(()=>k.hotKeys.on($)),O(()=>k.hotKeys.off($));const S=V(()=>m[x.value]),z=V(()=>Object.keys(m).length>0&&S.value);return(s,l)=>(p(),h(oe,null,{default:u(()=>[d(f(J),{title:"Cookies"},{content:u(()=>[_("div",re,[d(ee,null,{default:u(()=>[(p(!0),M(q,null,P(Object.values(f(m)),o=>(p(),M("li",{key:o.uid,class:"gap-1/2 flex flex-col"},[_("div",pe,[(p(),h(ae,{key:o.uid,class:"text-xs",isDeletable:"",to:{name:"cookies",params:{[f(N).Cookies]:o.uid}},type:"cookies",variable:{name:o.name,uid:o.uid},warningMessage:"Are you sure you want to delete this cookie?",onClick:R(t=>K(t,o.uid),["prevent"]),onDelete:t=>A(o.uid)},null,8,["to","variable","onClick","onDelete"]))])]))),128))]),_:1})])]),button:u(()=>[d(Y,{click:w,hotkey:"N"},{title:u(()=>l[1]||(l[1]=[b(" Add Cookie ")])),_:1})]),_:1}),d(le,{class:"flex-1"},{default:u(()=>[z.value?(p(),h(Q,{key:0,class:"*:border-b-0"},{title:u(()=>l[2]||(l[2]=[b("Edit Cookie")])),default:u(()=>[d(ie)]),_:1})):(p(),h(X,{key:1}))]),_:1}),d(ce,{state:f(n),onCancel:l[0]||(l[0]=o=>f(n).hide()),onSubmit:j},null,8,["state"])]),_:1}))}});export{Me as default};

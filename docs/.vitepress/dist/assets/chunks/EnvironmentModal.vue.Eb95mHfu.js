import{h as w,v as D,j as N,aG as P,$ as j,i as T}from"./theme.Ctjctau-.js";import{a as M}from"./DeleteSidebarListElement.vue.CZa9T-i1.js";import{k as B,a as f,f as I,w as $,v as k,z as n,E as b,F as S,$ as E,y as d,C as x,u as v,K as u,P as W,ac as A,an as K,U as p,n as L,D as m,A as R,B as G}from"./framework.C3K8O85p.js";import{h as q,b as H}from"./CommandActionInput.vue.CccXxgZo.js";const J=["onClick"],O=["placeholder"],U=B({__name:"EnvironmentColors",props:{activeColor:{},selector:{type:Boolean,default:!1}},emits:["select"],setup(g,{emit:y}){const o=g,C=y,s=f(""),i=f(null),c=f(!1),r=f(!1),t=[{color:"#FFFFFF"},{color:"#EF0006"},{color:"#EDBE20"},{color:"#069061"},{color:"#FB892C"},{color:"#0082D0"},{color:"#5203D1"},{color:"#FFC0CB"}],h=I(()=>o.activeColor&&!t.some(e=>e.color===o.activeColor)||s.value?`background-color: ${o.activeColor||s.value};`:"background: linear-gradient(to right, rgb(235, 87, 87), rgb(242, 201, 76), rgb(76, 183, 130), rgb(78, 167, 252), rgb(250, 96, 122));"),F=()=>{c.value=!c.value,o.selector&&(r.value=!1),L(()=>{i.value&&i.value.focus()})};$(s,e=>{e&&!e.startsWith("#")&&(s.value=`#${e}`),c.value=!0});const _=()=>{o.selector&&(r.value=!r.value)},z=e=>{C("select",e),o.selector&&(r.value=!1)};return(e,l)=>(n(),k("div",null,[c.value?b("",!0):(n(),k(S,{key:0},[o.selector&&!r.value?(n(),k("div",{key:0,class:d(["flex cursor-pointer items-center justify-center rounded-full",o.selector?"h-4 w-4":"h-5 w-5"]),style:E({backgroundColor:e.activeColor}),onClick:_},[e.activeColor?(n(),x(v(w),{key:0,class:d(["text-c-btn",o.selector&&"p-0.5"]),icon:"Checkmark",size:"xs"},null,8,["class"])):b("",!0)],6)):b("",!0),r.value||!o.selector?(n(),k("div",{key:1,class:d(["color-selector flex flex-row items-center justify-between gap-1.5 space-x-1",o.selector?"h-4":"min-h-10 min-w-[296px]"])},[(n(),k(S,null,W(t,a=>u("div",{key:a.color,class:d(["flex cursor-pointer items-center justify-center rounded-full",o.selector?"h-4 w-4":"h-5 w-5"]),style:E({backgroundColor:a.color}),onClick:V=>z(a.color)},[e.activeColor===a.color&&!s.value?(n(),x(v(w),{key:0,class:d(["text-c-btn",o.selector&&"p-0.5"]),icon:"Checkmark",size:"xs"},null,8,["class"])):b("",!0)],14,J)),64)),l[2]||(l[2]=u("hr",{class:"border-ghost h-5 w-0.5 border-l"},null,-1)),u("label",{class:d(["z-10 flex cursor-pointer flex-row items-center justify-center gap-2 rounded-full",o.selector?"h-4 w-4":"h-5 w-5"]),style:E(h.value),onClick:F},[!c.value&&(e.activeColor===s.value||e.activeColor&&!t.some(a=>a.color===e.activeColor))?(n(),x(v(w),{key:0,class:"text-c-btn",icon:"Checkmark",size:"xs"})):b("",!0)],6)],2)):b("",!0)],64)),c.value?(n(),k("div",{key:1,class:d(["color-selector flex flex-1 items-center gap-2 rounded",o.selector?"h-4":"min-h-10"])},[u("span",{class:d(["absolute rounded-full border border-dashed",o.selector?"h-4 w-4":"h-5 w-5"])},null,2),u("span",{class:d(["z-[1] rounded-full",o.selector?"h-4 w-4":"h-5 w-5"]),style:E(h.value)},null,6),A(u("input",{ref_key:"customColorInputRef",ref:i,"onUpdate:modelValue":l[0]||(l[0]=a=>s.value=a),class:"w-full flex-1 border-transparent text-sm outline-none",placeholder:e.activeColor||"#000000",type:"text",onInput:l[1]||(l[1]=a=>z(s.value))},null,40,O),[[K,s.value]]),u("button",{class:"text-c-3 hover:bg-b-2 rounded-lg p-1.5",type:"button",onClick:F},[p(v(w),{icon:"Checkmark",size:"xs"})])],2)):b("",!0)]))}}),Q={class:"flex flex-col gap-4"},oe=B({__name:"EnvironmentColorModal",props:{state:{},selectedColor:{}},emits:["cancel","submit"],setup(g,{emit:y}){const o=g,C=y,s=f(""),i=r=>{s.value=r},c=()=>{C("submit",s.value),s.value=""};return(r,t)=>(n(),x(v(D),{size:"xxs",state:r.state,title:"Edit Environment Color"},{default:m(()=>[u("div",Q,[p(U,{activeColor:s.value||o.selectedColor,class:"w-full p-1",onSelect:i},null,8,["activeColor"]),p(M,{onCancel:t[0]||(t[0]=h=>C("cancel")),onSubmit:c})])]),_:1},8,["state"]))}}),X={class:"flex items-start gap-2"},te=B({__name:"EnvironmentModal",props:{state:{},activeWorkspaceCollections:{},collectionId:{}},emits:["cancel","submit"],setup(g,{emit:y}){const o=g,C=y,{events:s}=N(),i=f(""),c=f("#FFFFFF"),r=I(()=>[...o.activeWorkspaceCollections.filter(e=>{var l;return((l=e.info)==null?void 0:l.title)!=="Drafts"}).map(e=>{var l;return{id:e.uid,label:((l=e.info)==null?void 0:l.title)??"Untitled Collection"}})]),t=f(r.value.find(e=>e.id===o.collectionId)),{toast:h}=T(),F=e=>{c.value=e};$(()=>o.state.open,e=>{e&&(i.value="",c.value="#FFFFFF",o.collectionId?t.value=r.value.find(l=>l.id===o.collectionId):t.value=void 0)});const _=()=>{var e,l,a,V;if(!i.value.trim()){h("Please enter a name before adding an environment.","error");return}if(!((e=t.value)!=null&&e.id)){h("Please select a collection before adding an environment.","error");return}C("submit",{name:i.value,color:c.value,type:((l=t.value)==null?void 0:l.id)==="global"?"global":"collection",collectionId:((a=t.value)==null?void 0:a.id)!=="global"?(V=t.value)==null?void 0:V.id:void 0})},z=()=>{o.state.hide(),s.commandPalette.emit({commandName:"Create Collection"})};return(e,l)=>(n(),x(v(D),{bodyClass:"border-t-0 rounded-t-lg",size:"xs",state:e.state},{default:m(()=>[p(q,{disabled:!t.value||!i.value.trim(),onCancel:l[2]||(l[2]=a=>C("cancel")),onSubmit:_},{options:m(()=>[p(v(P),{modelValue:t.value,"onUpdate:modelValue":l[1]||(l[1]=a=>t.value=a),options:r.value,placeholder:"Select Type"},{default:m(()=>[r.value.length>0?(n(),x(v(j),{key:0,class:"hover:bg-b-2 max-h-8 w-fit justify-between gap-1 p-2 text-xs",variant:"outlined"},{default:m(()=>[u("span",{class:d(t.value?"text-c-1":"text-c-3")},G(t.value?t.value.label:"Select Collection"),3),p(v(w),{class:"text-c-3",icon:"ChevronDown",size:"xs"})]),_:1})):(n(),x(v(j),{key:1,class:"hover:bg-b-2 max-h-8 justify-between gap-1 p-2 text-xs",variant:"outlined",onClick:z},{default:m(()=>l[3]||(l[3]=[u("span",{class:"text-c-1"},"Create Collection",-1)])),_:1}))]),_:1},8,["modelValue","options"])]),submit:m(()=>l[4]||(l[4]=[R(" Add Environment ")])),default:m(()=>[u("div",X,[p(U,{activeColor:c.value,class:"peer",selector:"",onSelect:F},null,8,["activeColor"]),p(H,{modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=a=>i.value=a),class:"-mt-[.5px] !p-0 peer-has-[.color-selector]:hidden",placeholder:"Environment name"},null,8,["modelValue"])])]),_:1},8,["disabled"])]),_:1},8,["state"]))}});export{te as K,oe as M};

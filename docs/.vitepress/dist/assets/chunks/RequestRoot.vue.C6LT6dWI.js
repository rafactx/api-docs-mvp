import{m as Ie,z as ve,j as fe,u as ot,f as rt,c as it,F as Ee,p as Ve,d as ut,G as ct,i as Oe,L as dt,J as mt,W as pt,I as vt,P as ft,s as $e,a as be,$ as ie,b as ye,e as Me,g as Ze,h as B,x as Te,k as te,l as ht,n as _e,o as qe,N as yt,q as we,B as gt,r as xe,t as bt,v as ke,w as et,y as Se,C as Le,D as tt,E as Be,H as He,K as xt,M as wt,O as kt,Q as Ct,S as $t,T as Rt,U as ue,V as _t,X as We,Y as qt,Z as It,_ as St,a0 as Dt,a1 as Fe,a2 as Et,a3 as Ut,a4 as Ke,a5 as Mt,a6 as Tt,a7 as Wt}from"./theme.ChnCFiOV.js";import{k as he,v as G,z as g,K as h,B as ce,u as e,y as J,w as pe,f as H,C as W,e as De,D as C,U as x,E as N,F as me,P as Ce,a8 as Y,A as de,a as Z,n as Ae,a7 as je,a6 as Re,ar as zt,Q as Ot,x as Je,ac as At,j as jt,aj as Ye,al as Ge,ap as Nt,i as at}from"./framework.ZtjFAS4N.js";import{d as lt}from"./LibraryIcon.vue.BTTEFJvn.js";import{i as Qe}from"./ScalarAsciiArt.vue.CfbRXozR.js";import{g as Pt}from"./SidebarButton.vue.BBd7uyA6.js";import{a as Vt,w as ze}from"./DeleteSidebarListElement.vue.TO3Y4m4y.js";import{$ as Lt}from"./IconSelector.vue.CsKzIosG.js";import{C as st}from"./EditSidebarListElement.vue.TDEp-w3f.js";import{m as Bt}from"./Draggable.vue.BVx2gPV_.js";import{o as Ht}from"./mediaTypes.DD8haT3S.js";import"./ScalarHotkey.vue.B4myrqFa.js";const Ft={parse(m){try{return{error:!1,data:JSON.parse(m)}}catch(a){return{error:!0,message:a.message?String(a.message):"Unknown Error"}}}},Kt=["aria-pressed"],Jt={class:"sr-only"},Yt={class:"size-4",fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Gt={"clip-path":"url(#mask)"},Qt=he({__name:"SidebarToggle",setup(m){const{isSidebarOpen:a,toggleSidebarOpen:r}=Ie();return(p,n)=>(g(),G("button",{"aria-pressed":e(a),class:"scalar-sidebar-toggle text-c-3 hover:bg-b-2 active:text-c-1 rounded-lg p-2",type:"button",onClick:n[0]||(n[0]=(...f)=>e(r)&&e(r)(...f))},[h("span",Jt,ce(e(a)?"Hide":"Show")+" sidebar",1),(g(),G("svg",Yt,[n[1]||(n[1]=h("defs",null,[h("clipPath",{id:"mask"},[h("path",{"clip-rule":"evenodd",d:"M9 3.2H4c-1.7 0-3 1.3-3 3v11.5c0 1.7 1.3 3 3 3h5V3.2z"})])],-1)),h("g",Gt,[h("path",{class:J(["transition-transform duration-300",e(a)?"translate-x-0":"-translate-x-1/2"]),d:"M1 3.2h8v17.5H1z",fill:"currentColor"},null,2)]),n[2]||(n[2]=h("path",{d:"M20 20.8H4c-1.7 0-3-1.3-3-3V6.2c0-1.7 1.3-3 3-3h16c1.7 0 3 1.3 3 3v11.5c0 1.7-1.3 3-3 3zM9 3.2v17.5",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},null,-1))]))],8,Kt))}}),Xt=m=>{const a=new Set;return m&&["path","query","headers","cookies"].some(r=>{var p,n;return(n=(p=m.parameters)==null?void 0:p[r])==null?void 0:n.some(f=>{f.required&&f.value===""&&a.add(f.key)})}),a},Zt=5*1e3,ea=60*1e3,ta=()=>{const{toast:m}=Oe(),a=ve(),r=fe(),{activeCollection:p,activeWorkspace:n}=a,{collectionMutators:f}=r,w=l=>m(`[useOpenApiWatcher] Changes to the ${l} were not applied`,"error"),t=l=>{l.path[0]==="info"||l.path[0]==="security"?dt(l,a,r)||w("collection"):l.path[0]==="components"&&l.path[1]==="securitySchemes"?mt(l,a,r)||w("securitySchemes"):l.path[0]==="servers"?pt(l,a,r)||w("servers"):l.path[0]==="tags"?vt(l,a,r)||w("tags"):l.path[0]==="paths"&&(ft(l,a,r)||w("requests"))},{pause:s,resume:_}=ot(async()=>{var l,O;const A=(l=p.value)==null?void 0:l.documentUrl;if(!A)return;const $=Ee[A];try{const b=await rt(A,(O=n.value)==null?void 0:O.proxyUrl,!1),k=it(b);if(f.edit(p.value.uid,"watchModeStatus","WATCHING"),$!=null&&$.hash)if($.hash&&$.hash!==k){const{schema:q}=await Ve(b),S=ut($.schema,q),D=ct(S);try{D.forEach(t),Ee[A]={hash:k,schema:q}}catch(y){console.error("[useOpenApiWatcher] Error:",y)}}else console.log("[useOpenApiWatcher] No changes detected yet…");else{const{schema:q}=await Ve(b);q&&(Ee[A]={hash:k,schema:q})}}catch(b){console.error("[useOpenApiWatcher] Error:",b),console.info("[useOpenApiWatcher] Pausing watcher for 60 seconds"),s(),f.edit(p.value.uid,"watchModeStatus","ERROR"),m("[useOpenApiWatcher] Unable to fetch the spec file, paused the watcher for 60 seconds","error"),setTimeout(()=>{console.info("[useOpenApiWatcher] Resuming watcher"),_()},ea)}},Zt);pe([()=>{var l;return(l=p.value)==null?void 0:l.documentUrl},()=>{var l;return(l=p.value)==null?void 0:l.watchMode}],([l,O])=>{l&&O?(console.info(`[useOpenApiWatcher] Watching ${l} …`),_()):p.value&&(s(),f.edit(p.value.uid,"watchModeStatus","IDLE"))},{immediate:!0})},aa=`         ,\\
         \\\\\\,_
          \\\` ,\\
     __,.-" =__)
   ."        )
,_/   ,    \\/\\_
\\_| )_-\\ \\_-\`
   \`-----\` \`--\``,la=`         __
        // \\,_
          \\\` ,\\
     __,.-" =__)
   ."        )
,_/   ,    \\/\\ 
\\_| // /  /  /
   /  /    `,sa={class:"m-0 flex items-center gap-1.5 font-medium whitespace-nowrap"},na={class:"flex h-4 w-4 items-center justify-center"},oa=he({__name:"EnvironmentSelector",setup(m){const{activeCollection:a,activeWorkspace:r,activeEnvironment:p}=ve(),{collectionMutators:n}=fe(),{layout:f}=$e(),w=be(),t=$=>{a.value&&r.value&&(n.edit(a.value.uid,"x-scalar-active-environment",$),r.value.activeEnvironmentId=$)},s=()=>{var $;return w.push({name:"environment.default",params:{[te.Workspace]:($=r.value)==null?void 0:$.uid}})},_=H(()=>{const{value:$}=p,{value:b}=a;return($==null?void 0:$.name)||(b==null?void 0:b["x-scalar-active-environment"])||"No Environment"}),l=H(()=>{const{value:$}=a,b=$==null?void 0:$["x-scalar-environments"];return b?Object.entries(b).map(([k,q])=>({...q,uid:k,name:k})):[]}),O=()=>{const $=l.value;if($.length>0){const b=$[$.length-1];b!=null&&b.uid&&t(b.uid)}};pe(l,($,b)=>{$.length>b.length&&O()});const A=$=>{const b=$["x-scalar-active-environment"];b&&a.value&&r.value?(a.value["x-scalar-active-environment"]=b,r.value.activeEnvironmentId=b):r.value&&(r.value.activeEnvironmentId="")};return pe(a,$=>$&&A($)),De(()=>{a.value&&A(a.value)}),($,b)=>(g(),W(e(Te),{teleport:""},{items:C(()=>[(g(!0),G(me,null,Ce(l.value,k=>(g(),W(e(ye),{key:k.uid,class:"group/item flex items-center gap-1.5 overflow-hidden text-ellipsis whitespace-nowrap",onClick:Y(q=>t(k.uid),["stop"])},{default:C(()=>{var q;return[x(e(Me),{selected:((q=e(a))==null?void 0:q["x-scalar-active-environment"])===k.uid},null,8,["selected"]),de(" "+ce(k.name),1)]}),_:2},1032,["onClick"]))),128)),x(e(ye),{class:"group/item flex items-center gap-1.5 overflow-hidden text-ellipsis whitespace-nowrap",onClick:b[0]||(b[0]=Y(k=>t(""),["stop"]))},{default:C(()=>{var k,q,S;return[x(e(Me),{selected:((k=e(p))==null?void 0:k.uid)===""&&((q=e(a))==null?void 0:q["x-scalar-active-environment"])===""||((S=e(p))==null?void 0:S.name)==="No Environment"},null,8,["selected"]),b[1]||(b[1]=de(" No Environment "))]}),_:1}),x(e(Ze)),e(f)!=="modal"?(g(),W(e(ye),{key:0,class:"flex items-center gap-1.5",onClick:s},{default:C(()=>[h("div",na,[x(e(B),{icon:"Brackets",size:"sm"})]),b[2]||(b[2]=h("span",{class:"leading-none"},"Manage Environments",-1))]),_:1})):N("",!0)]),default:C(()=>[x(e(ie),{class:"text-c-1 hover:bg-b-2 line-clamp-1 h-auto w-fit justify-start px-1.5 py-1.5 font-normal",fullWidth:"",variant:"ghost"},{default:C(()=>[h("h2",sa,ce(_.value),1)]),_:1})]),_:1}))}});function ra(){const m=be(),{activeWorkspace:a,activeWorkspaceRequests:r,activeWorkspaceCollections:p}=ve(),{requests:n,tags:f}=fe(),w=Z([]),t=Z([]),s=Z(0),_=Z(""),l=Z(null),O=Z([]),A=new ht(w.value,{keys:["title","description","body"]}),$=()=>{_.value="",s.value=0,t.value=[],l.value instanceof HTMLInputElement&&l.value.blur()},b=u=>{w.value=u.filter(c=>!qe(c)).filter(c=>{var j;const P=(j=p.value)==null?void 0:j.find(M=>M.requests.includes(c.uid));return!(P!=null&&P.tags.map(M=>f[M]).filter(_e).filter(M=>{var R;return(R=c.tags)==null?void 0:R.includes(M.name)}).filter(M=>qe(M)).length)}).map(c=>{var j,P;return{id:c.uid,title:c.summary??c.method,description:c.description??"",httpVerb:c.method,path:c.path,link:(P=m==null?void 0:m.resolve({name:"request",params:{[te.Request]:c.uid,[te.Workspace]:(j=a.value)==null?void 0:j.uid}}))==null?void 0:P.href}}),A.setCollection(w.value)},k=()=>{s.value=0,t.value=A.search(_.value)};pe(_,u=>{u.length?k():t.value=[]});const q=u=>{const c=u==="up"?-1:1,j=o.value.length;s.value=(s.value+c+j)%j,Ae(()=>{const P=O.value[s.value];P instanceof HTMLElement&&P.scrollIntoView({behavior:"smooth",block:"center"})})},S=()=>{if(s.value>=0){const u=o.value[s.value];u&&y(u)}},D=H(()=>r.value.map(u=>n[u]).filter(_e));pe(r,()=>{b(D.value)},{immediate:!0});const y=u=>{m.push(u.item.id),$()},o=H(()=>_.value.length===0?w.value.map(u=>({item:u})):t.value);return{searchText:_,searchResultsWithPlaceholderResults:o,selectedSearchResult:s,onSearchResultClick:y,fuseSearch:k,searchInputRef:l,searchResultRefs:O,navigateSearchResults:q,selectSearchResult:S,populateFuseDataArray:b}}function ia(m,{collections:a,collectionMutators:r,tags:p,tagMutators:n,workspaceMutators:f}){const{layout:w}=$e(),t=(s,_)=>{s.type==="collection"?r.edit(s.uid,"children",_):s.type==="tag"&&n.edit(s.uid,"children",_)};return{handleDragEnd:(s,_)=>{var l,O,A,$;if(!s||!_)return;const{id:b,parentId:k}=s,{id:q,parentId:S,offset:D}=_;if(k?a[k]?r.edit(k,"children",a[k].children.filter(y=>y!==b)):p[k]&&n.edit(k,"children",p[k].children.filter(y=>y!==b)):f.edit((l=m.value)==null?void 0:l.uid,"collections",((O=m.value)==null?void 0:O.collections.filter(y=>y!==b))??[]),D===2){const y=a[q]||p[q];y&&t(y,[...y.children??[],b])}else if(S){const y=a[S]||p[S];if(!y)return;const o=[...y.children??[]],u=o.findIndex(c=>q===c)??0;o.splice(u+D,0,b),t(y,o)}else{const y=[...((A=m.value)==null?void 0:A.collections)??[]],o=y.findIndex(u=>q===u)??0;y.splice(o+D,0,b),f.edit(($=m.value)==null?void 0:$.uid,"collections",y)}},isDroppable:(s,_)=>{var l,O;return!(w==="modal"||!a[s.id]&&_.offset!==2||a[s.id]&&((O=(l=a[_.id])==null?void 0:l.info)==null?void 0:O.title)==="Drafts")}}}const ua={class:"grid grid-cols-[auto_1fr] gap-2"},ca={class:"flex aspect-square"},da=he({__name:"EditSidebarListCollection",props:{name:{},icon:{}},emits:["close","edit"],setup(m,{emit:a}){const r=m,p=a,n=Z(r.name),f=Z(r.icon);return(w,t)=>(g(),W(Vt,{onCancel:t[2]||(t[2]=s=>p("close")),onSubmit:t[3]||(t[3]=s=>p("edit",n.value,f.value))},{default:C(()=>[h("div",ua,[h("div",ca,[x(Lt,{modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=s=>f.value=s),placement:"bottom-start"},{default:C(()=>[x(e(ie),{class:"aspect-square h-auto px-0",variant:"outlined"},{default:C(()=>[x(e(lt),{class:"text-c-2 size-4",src:f.value},null,8,["src"])]),_:1})]),_:1},8,["modelValue"])]),x(e(yt),{modelValue:n.value,"onUpdate:modelValue":t[1]||(t[1]=s=>n.value=s),autofocus:"",class:"flex-1"},null,8,["modelValue"])])]),_:1}))}}),ma=he({__name:"RequestSidebarItemMenu",props:{menuItem:{}},emits:["closeMenu","toggleWatchMode","clearDrafts"],setup(m,{emit:a}){const r=m,p=a,{replace:n}=be(),{activeRouterParams:f,activeWorkspaceCollections:w,activeWorkspaceRequests:t}=ve(),{events:s,requestMutators:_}=fe(),l=we(),O=we(),A=we(),$=()=>{var u;return s.commandPalette.emit({commandName:"Add Example",metaData:{itemUid:(u=r.menuItem.item)==null?void 0:u.entity.uid}})},b=(u,c)=>{var j;(j=r.menuItem.item)==null||j.edit(u,c),l.hide()},k=()=>{var u,c,j;if((u=r.menuItem.item)==null||u.delete(),!t.value.length){const{request:P}=et(),M=w.value.find(R=>{var E;return((E=R.info)==null?void 0:E.title)==="Drafts"});M&&(_.add(P,M.uid),n({name:"request",params:{[te.Request]:P.uid}}))}if(f.value[te.Request]===((c=r.menuItem.item)==null?void 0:c.entity.uid)&&n({name:"request",params:{[te.Request]:"default"}}),f.value[te.Examples]===((j=r.menuItem.item)==null?void 0:j.entity.uid)&&n({name:"request",params:{[te.Request]:"default"}}),w.value[0]){const P=w.value[0].requests[0];n({name:"request",params:{[te.Request]:P}})}O.hide()},q=Z(null);pe([()=>r.menuItem.open,q],async([u])=>{var c,j;u&&(j=(c=q.value)==null?void 0:c.$parent)!=null&&j.$el&&q.value.$parent.$el.focus()});const S=()=>r.menuItem.open&&p("closeMenu");De(()=>window.addEventListener("click",S)),je(()=>window.removeEventListener("click",S));const D=()=>{p("toggleWatchMode",r.menuItem.item)},y=()=>{p("clearDrafts"),A.hide()},o=H(()=>{var u;return((u=r.menuItem.item)==null?void 0:u.title)==="Drafts"});return(u,c)=>{var j,P;return g(),G(me,null,[u.menuItem.targetRef&&u.menuItem.open?(g(),W(e(bt),{key:0,placement:"right-start",target:u.menuItem.targetRef,teleport:""},{floating:C(()=>[x(e(gt),{onKeydown:c[3]||(c[3]=Re(M=>u.$emit("closeMenu"),["escape"]))},{default:C(()=>{var M,R;return[((M=u.menuItem.item)==null?void 0:M.entity.type)==="request"?(g(),W(e(xe),{key:0,class:"flex gap-2",onClick:$},{default:C(()=>[x(e(B),{class:"inline-flex",icon:"Example",size:"md",thickness:"1.5"}),c[8]||(c[8]=h("span",null,"Add Example",-1))]),_:1})):N("",!0),o.value?N("",!0):(g(),W(e(xe),{key:1,ref_key:"menuRef",ref:q,class:"flex gap-2",onClick:c[0]||(c[0]=E=>e(l).show())},{default:C(()=>{var E;return[x(e(B),{class:"inline-flex",icon:"Edit",size:"md",thickness:"1.5"}),h("span",null,[((E=u.menuItem.item)==null?void 0:E.entity.type)==="collection"?(g(),G(me,{key:0},[de(" Edit ")],64)):(g(),G(me,{key:1},[de(" Rename ")],64))])]}),_:1},512)),(R=u.menuItem.item)!=null&&R.documentUrl?(g(),W(e(xe),{key:2,ref_key:"menuRef",ref:q,class:"flex gap-2",onClick:D},{default:C(()=>{var E,U;return[x(e(B),{class:"inline-flex",icon:(E=u.menuItem.item)!=null&&E.watchMode?"Unwatch":"Watch",size:"md",thickness:"1.5"},null,8,["icon"]),h("span",null,ce((U=u.menuItem.item)!=null&&U.watchMode?"Disable Watch Mode":"Enable Watch Mode"),1)]}),_:1},512)):N("",!0),o.value?N("",!0):(g(),W(e(xe),{key:3,class:"flex gap-2",onClick:c[1]||(c[1]=E=>e(O).show())},{default:C(()=>[x(e(B),{class:"inline-flex",icon:"Delete",size:"md",thickness:"1.5"}),c[9]||(c[9]=h("span",null,"Delete",-1))]),_:1})),o.value?(g(),W(e(xe),{key:4,class:"flex gap-2",onClick:c[2]||(c[2]=E=>e(A).show())},{default:C(()=>[x(e(B),{class:"inline-flex",icon:"Delete",size:"md",thickness:"1.5"}),c[10]||(c[10]=h("span",null,"Clear Drafts",-1))]),_:1})):N("",!0)]}),_:1})]),_:1},8,["target"])):N("",!0),x(e(ke),{size:"xxs",state:e(O),title:`Delete ${(j=u.menuItem.item)==null?void 0:j.resourceTitle}`},{default:C(()=>{var M,R;return[x(ze,{variableName:((M=u.menuItem.item)==null?void 0:M.title)??"",warningMessage:(R=u.menuItem.item)==null?void 0:R.warning,onClose:c[4]||(c[4]=E=>e(O).hide()),onDelete:k},null,8,["variableName","warningMessage"])]}),_:1},8,["state","title"]),x(e(ke),{size:"xxs",state:e(l),title:`Edit ${(P=u.menuItem.item)==null?void 0:P.resourceTitle}`},{default:C(()=>{var M,R,E,U;return[((M=u.menuItem.item)==null?void 0:M.resourceTitle)==="Collection"?(g(),W(da,{key:0,icon:((R=u.menuItem.item)==null?void 0:R.icon)||"interface-content-folder",name:(E=u.menuItem.item)==null?void 0:E.title,onClose:c[5]||(c[5]=F=>e(l).hide()),onEdit:b},null,8,["icon","name"])):(g(),W(st,{key:1,name:((U=u.menuItem.item)==null?void 0:U.title)??"",onClose:c[6]||(c[6]=F=>e(l).hide()),onEdit:b},null,8,["name"]))]}),_:1},8,["state","title"]),x(e(ke),{size:"xxs",state:e(A),title:"Clear Drafts"},{default:C(()=>[x(ze,{variableName:"All Drafts",warningMessage:"This action will clear all drafts. This cannot be undone.",onClose:c[7]||(c[7]=M=>e(A).hide()),onDelete:y})]),_:1},8,["state"])],64)}}}),pa=Se(ma,[["__scopeId","data-v-709241c2"]]),va=(m,a,r)=>{var p;const n=m.find(s=>{var _;return((_=s.info)==null?void 0:_.title)==="Drafts"}),f=a.length===1;if(!a[0])return!1;const w=n==null?void 0:n.requests.includes(a[0]);if(!w)return!1;const t=((p=r[(n==null?void 0:n.requests[0])??""])==null?void 0:p.summary)!=="My First Request";return f&&w&&!t},fa={class:"line-clamp-1 w-full pl-2 font-medium break-all"},ha={class:"flex flex-row items-center gap-1"},ya={class:"relative"},ga={class:"flex items-start"},ba={class:"flex flex-1 flex-row justify-between font-medium"},xa={class:"line-clamp-1 w-full text-left break-all"},wa={class:"relative flex h-fit justify-end"},ka={class:"flex items-center justify-center",type:"button"},Ca=["aria-expanded"],$a={class:"flex h-5 max-w-[14px] items-center justify-center"},Ra={class:"flex flex-1 flex-row justify-between"},_a={class:"line-clamp-1 w-full text-left font-medium break-all"},qa={class:"relative flex h-fit justify-end"},Ia={class:"flex items-center justify-center",type:"button"},Sa={key:3},Ue="hover:bg-sidebar-b-active indent-padding-left",Da=he({__name:"RequestSidebarItem",props:{isDraggable:{type:Boolean,default:!1},isDroppable:{type:[Boolean,Function],default:!1},parentUids:{},uid:{},menuItem:{}},emits:["onDragEnd","newTab","openMenu"],setup(m,{emit:a}){zt(d=>({d6dab45e:c.value,"07f1324d":j.value}));const r=a,{activeCollection:p,activeRequest:n,activeRouterParams:f,activeWorkspace:w}=ve(),{collections:t,tags:s,requests:_,requestExamples:l,collectionMutators:O,tagMutators:A,requestMutators:$,requestExampleMutators:b,events:k}=fe(),q=be(),{collapsedSidebarFolders:S,toggleSidebarFolder:D}=Ie(),{layout:y}=$e(),o=H(()=>{var d,i,K,X,V,L;const z=t[m.uid],le=s[m.uid],se=_[m.uid],I=l[m.uid];return z?{title:((d=z.info)==null?void 0:d.title)||"Untitled Collection",entity:z,resourceTitle:"Collection",children:z.children,icon:z["x-scalar-icon"],documentUrl:z.documentUrl,watchMode:z.watchMode,to:z.uid&&((i=z==null?void 0:z.info)==null?void 0:i.title)!=="Drafts"?{name:"collection",params:{[te.Workspace]:(K=w.value)==null?void 0:K.uid,[te.Collection]:z.uid}}:void 0,warning:"This cannot be undone. You’re about to delete the collection and all folders and requests inside it.",edit:(v,T)=>{O.edit(z.uid,"info.title",v),T&&O.edit(z.uid,"x-scalar-icon",T)},delete:()=>{w.value&&O.delete(z,w.value)}}:le?{title:le.name,entity:le,resourceTitle:"Tag",children:le.children,warning:"This cannot be undone. You’re about to delete the tag and all requests inside it",edit:v=>A.edit(le.uid,"name",v),delete:()=>m.parentUids[0]&&A.delete(le,m.parentUids[0])}:se?{title:se.summary??se.path,to:{name:"request",params:{workspace:(X=w.value)==null?void 0:X.uid,request:se.uid}},method:se.method,entity:se,resourceTitle:"Request",warning:"This cannot be undone. You’re about to delete the request.",children:se.examples.slice(1),edit:v=>$.edit(se.uid,"summary",v),delete:()=>m.parentUids[0]&&$.delete(se,m.parentUids[0])}:I!=null&&I.requestUid?{title:I.name,to:{name:"request.examples",params:{workspace:(V=w.value)==null?void 0:V.uid,request:I.requestUid,examples:I.uid}},method:(L=_[I.requestUid])==null?void 0:L.method,entity:I,resourceTitle:"Example",warning:"This cannot be undone. You’re about to delete the example from the request.",children:[],edit:v=>b.edit(I.uid,"name",v),delete:()=>b.delete(I)}:{title:"Unknown",entity:{uid:"",type:"unknown"},resourceTitle:"Unknown",children:[],edit:()=>null,delete:()=>null}}),u=H(()=>o.value.entity.type==="collection"&&o.value.title==="Drafts"),c=H(()=>m.parentUids.length?y==="modal"?`${(m.parentUids.length-1)*12}px`:`${m.parentUids.length*12}px`:"12px"),j=H(()=>m.parentUids.length?y==="modal"?`${(m.parentUids.length-1)*12}px`:`${m.parentUids.length*12}px`:"0px"),P=H(()=>{var d;return S[m.uid]||((d=n.value)==null?void 0:d.uid)===m.uid&&o.value.entity.examples.length>1}),M=H(()=>{var d;return typeof q.currentRoute.value.name=="string"&&q.currentRoute.value.name.startsWith("request")&&f.value[te.Request]==="default"&&((d=n.value)==null?void 0:d.uid)===m.uid}),R=Z(null),E=H(()=>{let d=.5,i=.5;if(!R.value)return{ceiling:d,floor:i};const{draggingItem:K}=R.value;return!t[K==null?void 0:K.id]&&o.value.entity.type==="collection"?(d=1,i=0):o.value.entity.type==="tag"&&(d=.8,i=.2),{ceiling:d,floor:i}}),U=(d,i)=>!(y==="modal"||l[i.id]||t[d.id]),F=(d,i)=>{d&&(xt(["default"]).some(K=>d[K])?r("newTab",i.title||"",i.entity.uid):i.to&&q.push(i.to),Ae(()=>k.focusAddressBar.emit()))};function ae(d){var i,K,X;const V=m.parentUids[0]?((i=t[m.parentUids[0]])==null?void 0:i.uid)||"":d,L=m.parentUids[0]&&(K=s[d])!=null&&K.name?{tags:[s[d].name]}:{},z=$.add(L,V);z&&(q.push({name:"request",params:{workspace:(X=w.value)==null?void 0:X.uid,request:z.uid}}),k.hotKeys.emit({focusAddressBar:new KeyboardEvent("keydown",{key:"l"})}))}const oe=H(()=>{const{uid:d,watchModeStatus:i}=p.value||{};return d!==o.value.entity.uid?"text-c-3":i==="WATCHING"?"text-c-1":i==="ERROR"?"text-red":"text-c-3"}),Q=H(()=>o.value.title==="Drafts"&&y!=="modal"&&o.value.children.length>0),re=H(()=>{const d=_[m.uid];if(d)return!qe(d);const i=s[m.uid];return i?!qe(i):!0});return(d,i)=>{const K=Ot("RequestSidebarItem",!0);return re.value?(g(),G("li",{key:0,class:J(["relative flex flex-row",[e(y)==="modal"&&d.parentUids.length>1||e(y)!=="modal"&&d.parentUids.length?"before:bg-border indent-border-line-offset mb-[.5px] before:pointer-events-none before:absolute before:top-0 before:left-[calc(.75rem_+_.5px)] before:z-1 before:h-[calc(100%_+_.5px)] before:w-[.5px] last:mb-0 last:before:h-full":""]])},[x(e(Bt),{id:o.value.entity.uid,ref_key:"draggableRef",ref:R,ceiling:E.value.ceiling,class:"gap-1/2 flex flex-1 flex-col text-sm",floor:E.value.floor,isDraggable:d.isDraggable,isDroppable:d.isDroppable,parentIds:d.parentUids,onOnDragEnd:i[12]||(i[12]=(...X)=>d.$emit("onDragEnd",...X))},{default:C(()=>{var X;return[(o.value.entity.type==="request"||o.value.entity.type==="requestExample")&&o.value.to?(g(),W(e(Le),{key:0,class:"group no-underline",to:o.value.to,onClick:i[1]||(i[1]=Y(V=>F(V,o.value),["prevent"]))},{default:C(({isExactActive:V})=>{var L,z;return[h("div",{class:J(["relative flex min-h-8 w-full cursor-pointer flex-row items-start justify-between gap-0.5 rounded py-1.5 pr-2",[Ue,V||M.value?"bg-sidebar-b-active text-sidebar-c-active transition-none":"text-sidebar-c-2"]])},[h("span",fa,ce(o.value.title||"Untitled"),1),h("div",ha,[h("div",ya,[e(y)!=="modal"?(g(),W(e(ie),{key:0,class:J(["hover:bg-b-3 hidden aspect-square h-fit px-0.5 py-0 opacity-0 group-hover:flex group-hover:opacity-100 group-focus-visible:opacity-100 group-has-[:focus-visible]:opacity-100",{flex:((z=(L=d.menuItem)==null?void 0:L.item)==null?void 0:z.entity.uid)===o.value.entity.uid&&d.menuItem.open}]),size:"sm",type:"button",variant:"ghost",onClick:i[0]||(i[0]=Y(le=>d.$emit("openMenu",{item:o.value,parentUids:d.parentUids,targetRef:le.currentTarget,open:!d.menuItem.open}),["stop","prevent"]))},{default:C(()=>[x(e(B),{icon:"Ellipses",size:"md"})]),_:1},8,["class"])):N("",!0)]),h("span",ga,[i[13]||(i[13]=de("   ")),i[14]||(i[14]=h("span",{class:"sr-only"},"HTTP Method:",-1)),o.value.method?(g(),W(e(tt),{key:0,class:"font-bold",method:o.value.method},null,8,["method"])):N("",!0)])])],2)]}),_:1},8,["to"])):(e(y)!=="modal"||d.parentUids.length)&&o.value.entity.type==="collection"&&o.value.to?(g(),W(e(Le),{key:1,"aria-expanded":!!e(S)[o.value.entity.uid],class:J(["hover:bg-b-2 group relative flex w-full flex-row justify-start gap-1.5 rounded p-1.5 no-underline focus-visible:z-10",[Ue,{"bg-sidebar-b-active text-sidebar-c-active transition-none":typeof e(q).currentRoute.value.name=="string"&&e(q).currentRoute.value.name.startsWith("collection")&&e(q).currentRoute.value.params[e(te).Collection]===o.value.entity.uid,"text-c-2":o.value.title==="Untitled Collection"}]]),to:o.value.to},{default:C(()=>{var V;return[h("span",{class:"flex h-5 max-w-[14px] cursor-pointer items-center justify-center",onClick:i[2]||(i[2]=Y(L=>e(D)(o.value.entity.uid),["stop","prevent"]))},[Je(d.$slots,"leftIcon",{},()=>[x(e(Be),{class:"text-c-3 shrink-0",open:!!e(S)[o.value.entity.uid]},null,8,["open"])],!0),i[15]||(i[15]=de("   "))]),h("div",ba,[h("span",xa,ce(o.value.title),1),h("div",wa,[h("div",{class:J(["items-center gap-px opacity-0 group-hover:flex group-hover:opacity-100 group-focus-visible:opacity-100 group-has-[:focus-visible]:opacity-100",{flex:d.menuItem.open,hidden:!d.menuItem.open||((V=d.menuItem.item)==null?void 0:V.entity.uid)!==o.value.entity.uid}])},[e(y)!=="modal"&&!u.value||u.value&&Q.value?(g(),W(e(ie),{key:0,class:"hover:bg-b-3 hover:text-c-1 aspect-square h-fit px-0.5 py-0 group-focus-visible:opacity-100 group-has-[:focus-visible]:opacity-100",size:"sm",variant:"ghost",onClick:i[3]||(i[3]=Y(L=>d.$emit("openMenu",{item:o.value,parentUids:d.parentUids,targetRef:L.currentTarget.parentNode,open:!0}),["stop","prevent"]))},{default:C(()=>[x(e(B),{icon:"Ellipses",size:"md"})]),_:1})):N("",!0),e(y)!=="modal"?(g(),W(e(ie),{key:1,class:"hover:bg-b-3 hover:text-c-1 aspect-square h-fit px-0.5 py-0 group-focus-visible:opacity-100 group-has-[:focus-visible]:opacity-100",size:"sm",variant:"ghost",onClick:i[4]||(i[4]=Y(L=>ae(o.value.entity.uid),["stop","prevent"]))},{default:C(()=>[x(e(B),{icon:"Add",size:"md",thickness:"2"})]),_:1})):N("",!0)],2),o.value.watchMode?(g(),W(e(He),{key:0,placement:"right",offset:12,content:`Watching: ${o.value.documentUrl}`},{default:C(()=>[h("button",ka,[x(e(B),{class:J(["ml-0.5 text-sm",oe.value]),icon:"Watch",size:"md",thickness:"2"},null,8,["class"])])]),_:1},8,["content"])):N("",!0),i[16]||(i[16]=h("span",null," ",-1))])])]}),_:3},8,["aria-expanded","class","to"])):e(y)!=="modal"||d.parentUids.length?(g(),G("button",{key:2,"aria-expanded":!!e(S)[o.value.entity.uid],class:J(["hover:bg-b-2 group relative flex w-full flex-row justify-start gap-1.5 rounded p-1.5 focus-visible:z-10",[Ue]]),type:"button",onClick:i[7]||(i[7]=V=>e(D)(o.value.entity.uid))},[h("span",$a,[Je(d.$slots,"leftIcon",{},()=>[x(e(Be),{class:"text-c-3 hover:text-c-1 shrink-0",open:!!e(S)[o.value.entity.uid]},null,8,["open"])],!0),i[17]||(i[17]=de("   "))]),h("div",Ra,[h("span",_a,ce(o.value.title),1),h("div",qa,[h("div",{class:J(["items-center gap-px opacity-0 group-hover:flex group-hover:opacity-100 group-focus-visible:opacity-100 group-has-[:focus-visible]:opacity-100",{flex:d.menuItem.open,hidden:!d.menuItem.open||((X=d.menuItem.item)==null?void 0:X.entity.uid)!==o.value.entity.uid}])},[e(y)!=="modal"&&!u.value||u.value&&Q.value?(g(),W(e(ie),{key:0,class:"hover:bg-b-3 hover:text-c-1 aspect-square h-fit px-0.5 py-0 group-focus-visible:opacity-100 group-has-[:focus-visible]:opacity-100",size:"sm",variant:"ghost",onClick:i[5]||(i[5]=Y(V=>d.$emit("openMenu",{item:o.value,parentUids:d.parentUids,targetRef:V.currentTarget.parentNode,open:!0}),["stop","prevent"]))},{default:C(()=>[x(e(B),{icon:"Ellipses",size:"md"})]),_:1})):N("",!0),e(y)!=="modal"?(g(),W(e(ie),{key:1,class:"hover:bg-b-3 hover:text-c-1 aspect-square h-fit px-0.5 py-0 group-focus-visible:opacity-100 group-has-[:focus-visible]:opacity-100",size:"sm",variant:"ghost",onClick:i[6]||(i[6]=Y(V=>ae(o.value.entity.uid),["stop","prevent"]))},{default:C(()=>[x(e(B),{icon:"Add",size:"md",thickness:"2"})]),_:1})):N("",!0)],2),o.value.watchMode?(g(),W(e(He),{key:0,content:"Watching: {{ item.documentUrl }}",placement:"right",offset:12},{default:C(()=>[h("button",Ia,[x(e(B),{class:J(["ml-0.5 text-sm",oe.value]),icon:"Watch",size:"md",thickness:"2"},null,8,["class"])])]),_:1})):N("",!0),i[18]||(i[18]=h("span",null," ",-1))])])],10,Ca)):N("",!0),P.value?(g(),G("ul",Sa,[(g(!0),G(me,null,Ce(o.value.children,V=>(g(),W(K,{key:V,isDraggable:!e(l)[V],isDroppable:U,menuItem:d.menuItem,parentUids:[...d.parentUids,d.uid],uid:V,onNewTab:i[8]||(i[8]=(L,z)=>d.$emit("newTab",L,z)),onOnDragEnd:i[9]||(i[9]=(...L)=>d.$emit("onDragEnd",...L)),onOpenMenu:i[10]||(i[10]=L=>d.$emit("openMenu",L))},null,8,["isDraggable","menuItem","parentUids","uid"]))),128)),o.value.children.length===0?(g(),W(e(ie),{key:0,class:J(["text-c-1 hover:bg-b-2 flex h-8 w-full justify-start gap-1.5 py-0 text-xs",d.parentUids.length?"pl-9":""]),variant:"ghost",onClick:i[11]||(i[11]=V=>ae(o.value.entity.uid))},{default:C(()=>[x(e(B),{icon:"Add",size:"sm"}),i[19]||(i[19]=h("span",null,"Add Request",-1))]),_:1},8,["class"])):N("",!0)])):N("",!0)]}),_:3},8,["id","ceiling","floor","isDraggable","isDroppable","parentIds"])],2)):N("",!0)}}}),Ea=Se(Da,[["__scopeId","data-v-3e34b330"]]),Ua={class:"flex w-[inherit] items-center text-sm"},Ma={class:"m-0 flex items-center gap-1.5 font-bold"},Ta={class:"line-clamp-1 text-left"},Wa={class:"overflow-hidden text-ellipsis"},za={class:"flex h-4 w-4 items-center justify-center"},Oa=he({__name:"WorkspaceDropdown",setup(m){const{activeWorkspace:a}=ve(),{workspaces:r,workspaceMutators:p,events:n}=fe(),{push:f}=be(),w=S=>{var D;S!==((D=a.value)==null?void 0:D.uid)&&f({name:"workspace",params:{workspace:S}})},t=H(()=>Object.keys(r).length===1),s=()=>n.commandPalette.emit({commandName:"Create Workspace"}),_=Z(""),l=Z(""),O=we(),A=we(),$=S=>{const D=r[S];D&&(_.value=D.name,l.value=S,O.show())},b=S=>{S.trim()&&(p.edit(l.value,"name",S.trim()),O.hide())},k=S=>{const D=r[S];D&&(_.value=D.name,l.value=S,A.show())},q=async()=>{var S;if(!t.value){const D=((S=a.value)==null?void 0:S.uid)===l.value,y={...r};if(delete y[l.value],p.delete(l.value),D){const o=Object.keys(y)[0];await f({name:"workspace",params:{workspace:o}})}}A.hide()};return(S,D)=>(g(),G("div",null,[h("div",Ua,[x(e(Te),null,{items:C(()=>[(g(!0),G(me,null,Ce(e(r),(y,o)=>(g(),W(e(ye),{key:o,class:"group/item flex w-full items-center gap-1.5 overflow-hidden text-ellipsis whitespace-nowrap",onClick:Y(u=>w(y.uid),["stop"])},{default:C(()=>{var u;return[x(e(Me),{selected:((u=e(a))==null?void 0:u.uid)===o},null,8,["selected"]),h("span",Wa,ce(y.name),1),x(e(Te),{placement:"right-start",teleport:""},{items:C(()=>[x(e(ye),{class:"flex gap-2",onMousedown:c=>$(y.uid),onTouchend:Y(c=>$(y.uid),["prevent"])},{default:C(()=>[x(e(B),{class:"inline-flex",icon:"Edit",size:"md",thickness:"1.5"}),D[2]||(D[2]=h("span",null,"Rename",-1))]),_:2},1032,["onMousedown","onTouchend"]),t.value?N("",!0):(g(),W(e(ye),{key:0,class:"flex gap-2",onMousedown:Y(c=>k(y.uid),["prevent"]),onTouchend:Y(c=>k(y.uid),["prevent"])},{default:C(()=>[x(e(B),{class:"inline-flex",icon:"Delete",size:"md",thickness:"1.5"}),D[3]||(D[3]=h("span",null,"Delete",-1))]),_:2},1032,["onMousedown","onTouchend"]))]),default:C(()=>[x(e(ie),{class:"hover:bg-b-3 -mr-1 ml-auto aspect-square h-fit px-0.5 py-0 group-hover/item:flex",size:"sm",type:"button",variant:"ghost"},{default:C(()=>[x(e(B),{icon:"Ellipses",size:"sm"})]),_:1})]),_:2},1024)]}),_:2},1032,["onClick"]))),128)),x(e(Ze)),x(e(ye),{class:"flex items-center gap-1.5",onClick:s},{default:C(()=>[h("div",za,[x(e(B),{icon:"Add",size:"sm"})]),D[4]||(D[4]=h("span",null,"Create Workspace",-1))]),_:1})]),default:C(()=>[x(e(ie),{class:"text-c-1 hover:bg-b-2 line-clamp-1 h-full w-fit justify-start px-1.5 py-1.5 font-normal",fullWidth:"",variant:"ghost"},{default:C(()=>{var y;return[h("div",Ma,[h("h2",Ta,ce((y=e(a))==null?void 0:y.name),1)])]}),_:1})]),_:1})]),x(e(ke),{size:"xxs",state:e(A),title:"Delete workspace"},{default:C(()=>[x(ze,{variableName:_.value,warningMessage:"This cannot be undone. You’re about to delete the workspace and everything inside it.",onClose:D[0]||(D[0]=y=>e(A).hide()),onDelete:q},null,8,["variableName"])]),_:1},8,["state"]),x(e(ke),{size:"xxs",state:e(O),title:"Rename Workspace"},{default:C(()=>[x(st,{name:_.value,onClose:D[1]||(D[1]=y=>e(O).hide()),onEdit:b},null,8,["name"])]),_:1},8,["state"])]))}}),Aa={class:"bg-b-1 sticky top-0 z-20 flex h-12 items-center px-3"},ja={key:1,class:"text-c-3"},Na=["aria-pressed"],Pa={class:"sr-only"},Va={class:"search-button-fade sticky top-12 z-10 px-3 py-2.5 pt-0 focus-within:z-20",role:"search"},La={key:1,class:"contents"},Ba={key:0,class:"empty-sidebar-item-content px-2.5 py-2.5"},Ha={class:"rabbit-ascii relative m-auto mt-2 h-[68px] w-[60px]"},Fa=he({__name:"RequestSidebar",emits:["newTab","clearDrafts"],setup(m,{emit:a}){const r=a,{collapsedSidebarFolders:p,isSidebarOpen:n,setCollapsedSidebarFolder:f,toggleSidebarOpen:w}=Ie(),{layout:t}=$e(),s=fe(),{activeCollection:_,activeWorkspaceCollections:l,activeRequest:O,activeWorkspaceRequests:A,activeWorkspace:$}=ve(),{findRequestParents:b,events:k,requestMutators:q,requests:S}=s,{handleDragEnd:D,isDroppable:y}=ia($,s),{replace:o}=be(),u=()=>{k.commandPalette.emit({commandName:"Import from OpenAPI/Swagger/Postman/cURL"})},c=At(),{toast:j}=Oe(),P=jt({open:!1}),M=Z(!1);pe(O,I=>{I&&b(I).forEach(v=>f(v,!0))},{immediate:!0});const{searchText:R,searchResultsWithPlaceholderResults:E,selectedSearchResult:U,onSearchResultClick:F,fuseSearch:ae,searchInputRef:oe,searchResultRefs:Q,navigateSearchResults:re,selectSearchResult:d}=ra(),i=I=>{var v;I&&(I.toggleSidebar&&w(),I.focusRequestSearch&&((v=oe.value)==null||v.focus()))};De(()=>k.hotKeys.on(i)),je(()=>{k.hotKeys.off(i)});const K=I=>{if(I!=null&&I.documentUrl){I.watchMode=!I.watchMode;const v=l.value.find(T=>T.uid===I.entity.uid);v&&(v.watchMode=I.watchMode)}};pe(()=>l.value.map(I=>I.watchMode),(I,v)=>{I.forEach((T,ne)=>{var ee,ge,Ne;if(t!=="modal"&&T!==v[ne]&&((ge=(ee=l.value[ne])==null?void 0:ee.info)==null?void 0:ge.title)!=="Drafts"&&l.value[ne]){const Pe=l.value[ne];if(!Pe)return;const nt=`${(Ne=Pe.info)==null?void 0:Ne.title}: Watch Mode ${T?"enabled":"disabled"}`;j(nt,"info")}})});const X=H(()=>{var I;const v=E.value;if(!v.length)return"No results found";const T=(I=v[U.value])==null?void 0:I.item;if(!T)return"No result selected";const ne=R.value.length?`${v.length} result${v.length===1?"":"s"} found, `:"",ee=`, HTTP Method ${T.httpVerb}, Path ${T.path}`,ge=`${T.title} ${ee}`;return`${ne}Selected: ${ge}`}),V=()=>{const I=l.value.find(v=>{var T;return((T=v.info)==null?void 0:T.title)==="Drafts"});if(I&&I.requests.forEach(v=>{S[v]&&q.delete(S[v],I.uid)}),A.value.length){const v=l.value[0],T=v==null?void 0:v.requests[0];T&&o({name:"request",params:{[te.Request]:T}})}else{const{request:v}=et();I&&(q.add(v,I.uid),o({name:"request",params:{[te.Request]:v.uid}}))}},L=()=>{M.value=!M.value,M.value||(R.value=""),M.value&&Ae(()=>{var I;return(I=oe.value)==null?void 0:I.focus()})},z=H(()=>va(l.value,A.value,S)),le=H(()=>t==="modal"&&_.value?[_.value]:l.value),se=()=>{R.value||(M.value=!1)};return(I,v)=>(g(),G(me,null,[Ye(x(e($t),{class:J([e(n)?"sidebar-active-width":""])},Nt({content:C(()=>[h("div",Aa,[h("div",{class:J(["size-8",{"xl:hidden":e(t)!=="modal"}])},null,2),e(t)!=="modal"?(g(),W(e(Oa),{key:0})):N("",!0),e(t)!=="modal"?(g(),G("span",ja," / ")):N("",!0),e(t)!=="modal"?(g(),W(oa,{key:2})):N("",!0),h("button",{"aria-pressed":M.value,class:"ml-auto",type:"button",onClick:L},[h("span",Pa,ce(M.value?"Hide":"Show")+" search ",1),x(e(B),{class:"text-c-3 hover:bg-b-2 max-h-8 max-w-8 rounded-lg p-1.75 text-sm",icon:"Search"})],8,Na)]),Ye(h("div",Va,[x(e(wt),{ref_key:"searchInputRef",ref:oe,modelValue:e(R),"onUpdate:modelValue":v[0]||(v[0]=T=>at(R)?R.value=T:null),"aria-controls":e(c),label:X.value,sidebar:"",onInput:e(ae),onKeydown:[v[1]||(v[1]=Re(Y(T=>e(re)("down"),["stop"]),["down"])),v[2]||(v[2]=Re(Y(T=>e(d)(),["stop"]),["enter"])),v[3]||(v[3]=Re(Y(T=>e(re)("up"),["stop"]),["up"]))],onBlur:se},null,8,["modelValue","aria-controls","label","onInput"])],512),[[Ge,M.value]]),h("div",{class:J(["gap-1/2 flex flex-1 flex-col overflow-visible overflow-y-auto px-3 pt-0 pb-3",[{"pb-14":e(t)!=="modal"},{"h-[calc(100%-273.5px)]":z.value}]]),onDragenter:v[6]||(v[6]=Y(()=>{},["prevent"])),onDragover:v[7]||(v[7]=Y(()=>{},["prevent"]))},[e(R)?(g(),W(e(kt),{key:0,id:e(c),"aria-label":"Search Results",class:"gap-px",noResults:!e(E).length},{default:C(()=>[(g(!0),G(me,null,Ce(e(E),(T,ne)=>(g(),W(e(Ct),{id:`#search-input-${T.item.id}`,key:T.refIndex,ref_for:!0,ref:ee=>e(Q)[ne]=ee,selected:e(U)===ne,class:"px-2",href:T.item.link,onClick:Y(ee=>e(F)(T),["prevent"]),onFocus:ee=>U.value=ne},{addon:C(()=>[v[9]||(v[9]=h("span",{class:"sr-only"},"HTTP Method:",-1)),x(tt,{class:"font-bold",method:T.item.httpVerb??"get"},null,8,["method"])]),default:C(()=>[de(ce(T.item.title)+" ",1)]),_:2},1032,["id","selected","href","onClick","onFocus"]))),128))]),_:1},8,["id","noResults"])):(g(),G("nav",La,[(g(!0),G(me,null,Ce(le.value,T=>{var ne;return g(),W(Ea,{key:T.uid,isDraggable:e(t)!=="modal"&&((ne=T.info)==null?void 0:ne.title)!=="Drafts",isDroppable:e(y),menuItem:P,parentUids:[],uid:T.uid,onNewTab:v[4]||(v[4]=(ee,ge)=>r("newTab",{name:ee,uid:ge})),onOnDragEnd:e(D),onOpenMenu:v[5]||(v[5]=ee=>Object.assign(P,ee))},{leftIcon:C(()=>{var ee;return[((ee=T.info)==null?void 0:ee.title)==="Drafts"?(g(),W(e(B),{key:0,class:"text-sidebar-c-2 group-hover:hidden",icon:"Scribble",thickness:"2.25"})):(g(),W(e(lt),{key:1,class:"text-sidebar-c-2 size-3.5 min-w-3.5 stroke-2 group-hover:hidden",src:T["x-scalar-icon"]||"interface-content-folder"},null,8,["src"])),h("div",{class:J({"rotate-90":e(p)[T.uid]})},[x(e(B),{class:"text-c-3 hover:text-c-1 hidden text-sm group-hover:block",icon:"ChevronRight",size:"md"})],2)]}),_:2},1032,["isDraggable","isDroppable","menuItem","uid","onOnDragEnd"])}),128))]))],34)]),button:C(()=>[h("div",{class:J({"empty-sidebar-item":z.value})},[z.value?(g(),G("div",Ba,[h("div",Ha,[x(Qe,{art:e(aa),class:"rabbitsit font-bold"},null,8,["art"]),x(Qe,{art:e(la),class:"rabbitjump absolute top-0 left-0 font-bold"},null,8,["art"])]),v[10]||(v[10]=h("div",{class:"mt-2 mb-2 text-center text-sm text-balance"},[h("b",{class:"font-medium"},"Let's Get Started"),h("p",{class:"mt-2"}," Create request, folder, collection or import from OpenAPI/Postman ")],-1))])):N("",!0),e(t)!=="modal"?(g(),W(e(ie),{key:1,class:J(["mb-1.5 hidden h-fit w-full p-1.5 opacity-0",{"flex opacity-100":z.value}]),onClick:u},{default:C(()=>v[11]||(v[11]=[de(" Import Collection ")])),_:1},8,["class"])):N("",!0),e(t)!=="modal"?(g(),W(Pt,{key:2,click:e(k).commandPalette.emit,hotkey:"K"},{title:C(()=>v[12]||(v[12]=[de(" Add Item ")])),_:1},8,["click"])):N("",!0)],2)]),_:2},[e(t)!=="modal"?{name:"header",fn:C(()=>[]),key:"0"}:void 0]),1032,["class"]),[[Ge,e(n)]]),e(t)!=="modal"&&P?(g(),W(pa,{key:0,menuItem:P,onClearDrafts:V,onCloseMenu:v[8]||(v[8]=T=>P.open=!1),onToggleWatchMode:K},null,8,["menuItem"])):N("",!0)],64))}}),Ka=Se(Fa,[["__scopeId","data-v-7db729e2"]]),Ja=(m,a=!1)=>{var r,p;const n=Object.fromEntries(m);a&&["Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers"].map(t=>t.toLowerCase()).forEach(t=>delete n[t]);const f=Object.keys(n).find(t=>t.toLowerCase()==="x-scalar-modified-headers"),w=f?((p=(r=n[f])==null?void 0:r.toString().split(", "))==null?void 0:p.map(t=>t.toLowerCase()))??[]:[];return Object.keys(n).forEach(t=>{w.includes(t.toLowerCase())&&delete n[t]}),f&&delete n[f],Object.keys(n).forEach(t=>{const s=/^x-scalar-original-/i;if(s.test(t)){const _=t.replace(s,"");n[t]&&(n[_]=n[t],delete n[t])}}),Object.keys(n).forEach(t=>{const s=Ya(t);t!==s&&n[t]&&(n[s]=n[t],delete n[t])}),Object.fromEntries(Object.entries(n).sort(([t],[s])=>t.localeCompare(s)))},Ya=m=>m.split("-").map(a=>a.charAt(0).toUpperCase()+a.toLowerCase().slice(1)).join("-");function Ga(m,a,r){var p,n,f;if(!Rt(m))return{body:void 0,contentType:void 0};if(a.body.activeBody==="formData"&&a.body.formData){const w=a.body.formData.encoding==="form-data"?"multipart/form-data":"application/x-www-form-urlencoded",t=a.body.formData.encoding==="form-data"?new FormData:new URLSearchParams;return a.body.formData.value.forEach(s=>{!s.enabled||!s.key||(s.file&&t instanceof FormData?t.append(s.key,s.file,s.file.name):s.value!==void 0&&t.append(s.key,ue(s.value,r)))}),{body:t,contentType:w}}return a.body.activeBody==="raw"?{body:ue(((p=a.body.raw)==null?void 0:p.value)??"",r),contentType:(n=a.body.raw)==null?void 0:n.encoding}:a.body.activeBody==="binary"?{body:a.body.binary,contentType:(f=a.body.binary)==null?void 0:f.type}:{body:void 0,contentType:void 0}}function Qa(m,a){const r={};return m.parameters.headers.forEach(p=>{const n=p.key.trim().toLowerCase();p.enabled&&(n!=="content-type"||p.value!=="multipart/form-data")&&(r[n]=ue(p.value,a))}),r}function Xa(m,a,r){const p=new URLSearchParams,n=((r==null?void 0:r.parameters)??[]).reduce((f,w)=>(w.in==="query"&&(f[w.name]=w),f),{});return m.parameters.query.forEach(f=>{if(!f.enabled)return;const w=n[f.key];switch(f.type){case"array":{const t=ue(f.value??"",a).split(/,\ ?/);if((w==null?void 0:w.explode)===!1){const s=t.join(",");p.append(f.key,s)}else t.forEach(s=>{p.append(f.key,s.trim())});break}default:{const t=ue(f.value??"",a);p.append(f.key,t.trim());break}}}),p}function Za(m,a){const r=new _t(a);return Ht(r.essence)?new TextDecoder(r.parameters.get("charset")).decode(m):new Blob([m],{type:r.essence})}const Xe=()=>typeof window<"u"&&"electron"in window,el=({environment:m,example:a,globalCookies:r,proxyUrl:p,request:n,securitySchemes:f,selectedSecuritySchemeUids:w=[],server:t,status:s,pluginManager:_})=>{try{const l=m??{},O=new AbortController,A=a.parameters.path.reduce((U,F)=>(F.enabled&&(U[F.key]=ue(F.value,l)),U),{}),$=ue((t==null?void 0:t.url)??"",l),b=ue(ue(n.path,l),A);let k=$||b;if(!k)throw We.URL_EMPTY;Object.entries((t==null?void 0:t.variables)??{}).forEach(([U,F])=>{k=ue(k,{[U]:A[U]||F.default})});const q=Xa(a,l,n),S=Qa(a,l),{body:D}=Ga(n.method,a,l),{cookieParams:y}=qt({example:a,env:l,globalCookies:r,serverUrl:k,proxyUrl:p}),o=w.flat().map(U=>f[U]).filter(_e),u=It(o,l),c={...Object.entries(u.headers).reduce((U,[F,ae])=>(U[F.toLowerCase()]=ae,U),{}),...S},j=[...y,...u.cookies],P=new URLSearchParams([...q,...u.urlParams]);Xe()&&c["user-agent"]&&(c["X-Scalar-User-Agent"]=c["user-agent"]),k=St(k,b,P);const M=ue(Dt(j,c.Cookie),l);M&&(Xe()||Fe(p,k)?(console.warn("We’re using a `X-Scalar-Cookie` custom header to the request. The proxy will forward this as a `Cookie` header. We do this to avoid the browser omitting the `Cookie` header for cross-origin requests for security reasons."),c["X-Scalar-Cookie"]=M):(console.warn(`We’re trying to add a Cookie header, but browsers often omit them for cross-origin requests for various security reasons. If it’s not working, that’s probably why. Here are the requirements for it to work:

          - The browser URL must be on the same domain as the server URL.
          - The connection must be made over HTTPS.
          `),c.Cookie=M));const R=Et(p,k),E=new Request(R,{method:n.method.toUpperCase(),body:D??null,headers:c});return[null,{request:E,sendRequest:async()=>{var U,F,ae;s==null||s.emit("start"),_&&_.executeHook("onBeforeRequest");const oe=Date.now();try{const Q=await fetch(E,{signal:O.signal}),re=(U=Q.headers.get("content-type"))==null?void 0:U.startsWith("text/event-stream");s==null||s.emit("stop");const d=Date.now()-oe,i=Q.clone(),K=Ja(Q.headers,Fe(p,k)),X=Q.headers.get("content-type")??"text/plain;charset=UTF-8",V=await i.arrayBuffer(),L=Za(V,X),z=Q.clone(),le=z.statusText||((F=Ut[z.status])==null?void 0:F.name)||"",se=[204,205,304].includes(z.status),I=new Response(se?null:z.body,{status:z.status,statusText:le,headers:z.headers});_&&_.executeHook("onResponseReceived",{response:I,operation:n});const v="getSetCookie"in I.headers&&typeof I.headers.getSetCookie=="function"?I.headers.getSetCookie():[];return re&&Q.body?[null,{timestamp:Date.now(),request:a,response:{...I,headers:K,cookieHeaderKeys:v,reader:(ae=Q.body)==null?void 0:ae.getReader(),duration:d,method:n.method,path:b}}]:[null,{timestamp:Date.now(),request:a,response:{...Q,headers:K,cookieHeaderKeys:v,data:L,size:V.byteLength,duration:Date.now()-oe,method:n.method,status:Q.status,path:b}}]}catch(Q){return s==null||s.emit("abort"),[Ke(Q,We.REQUEST_FAILED),null]}},controller:O}]}catch(l){return console.error(l),s==null||s.emit("abort"),[Ke(l),null]}},tl={class:"flex h-full"},al={class:"flex h-full flex-1 flex-col"},ll=he({__name:"RequestRoot",emits:["newTab"],setup(m){const a=fe(),{toast:r}=Oe(),{layout:p}=$e(),n=Mt(),{isSidebarOpen:f}=Ie(),{activeCollection:w,activeExample:t,activeEnvironment:s,activeRequest:_,activeWorkspace:l,activeServer:O}=ve(),{cookies:A,requestHistory:$,showSidebar:b,securitySchemes:k,events:q}=a,S=Tt(),D=Z(),y=Z(),o=Z(new Set),u=Z(null),c=H(()=>{var R,E,U;return((R=w.value)!=null&&R.useCollectionSecurity?(E=w.value)==null?void 0:E.selectedSecuritySchemeUids:(U=_.value)==null?void 0:U.selectedSecuritySchemeUids)??[]}),j=async()=>{var R,E,U,F,ae,oe;if(!_.value||!t.value||!w.value)return;o.value=Xt(t.value);const Q=typeof s.value=="object"?s.value.value:"{}",re=Ft.parse(Q);re.error&&console.error("INVALID ENVIRONMENT!");const d=re.error||typeof re.data!="object"?{}:re.data??{},i=((R=l.value)==null?void 0:R.cookies.map(le=>A[le]).filter(_e))??[],K=((U=(E=w.value)==null?void 0:E.info)==null?void 0:U.title)==="Drafts"?void 0:O.value,[X,V]=el({request:_.value,example:t.value,selectedSecuritySchemeUids:c.value,proxyUrl:((F=l.value)==null?void 0:F.proxyUrl)??"",environment:d,globalCookies:i,status:q.requestStatus,securitySchemes:k,server:K,pluginManager:S});if((oe=(ae=n.value)==null?void 0:ae.onRequestSent)==null||oe.call(ae,_.value.path??""),X){r(X.message,"error");return}y.value=V.controller;const[L,z]=await V.sendRequest();u.value=z,L?r(L.message,"error"):$.push(M(z))},P=async()=>{var R;return(R=y.value)==null?void 0:R.abort(We.REQUEST_ABORTED)};De(()=>{q.executeRequest.on(j),q.cancelRequest.on(P)}),ta(),je(()=>q.executeRequest.off(j)),pe(()=>{var R;return(R=t.value)==null?void 0:R.parameters},()=>{o.value.clear()},{deep:!0});const M=R=>{var E;try{return structuredClone(R)}catch{const U={...R};return(E=R.response)!=null&&E.data&&(R.response.data instanceof Blob||R.response.data instanceof ArrayBuffer?U.response.data=R.response.data:U.response.data=JSON.parse(JSON.stringify(R.response.data))),U}};return(R,E)=>(g(),G("div",{ref_key:"element",ref:D,class:J(["bg-b-1 relative z-0 flex h-full flex-1 flex-col overflow-hidden pt-0",{"!mr-0 !mb-0 !border-0":e(p)==="modal"}])},[e(b)?(g(),W(Qt,{key:0,modelValue:e(f),"onUpdate:modelValue":E[0]||(E[0]=U=>at(f)?f.value=U:null),class:J(["absolute top-2 left-3 z-50",[{hidden:e(f)},{"xl:!flex":!e(f)},{"!flex":e(p)==="modal"}]])},null,8,["modelValue","class"])):N("",!0),h("div",tl,[e(b)?(g(),W(Ka,{key:0,onNewTab:E[1]||(E[1]=U=>R.$emit("newTab",U))})):N("",!0),h("div",al,[x(e(Wt),{invalidParams:o.value,selectedSecuritySchemeUids:c.value,requestResult:u.value},null,8,["invalidParams","selectedSecuritySchemeUids","requestResult"])])])],2))}}),fl=Se(ll,[["__scopeId","data-v-8a88f90a"]]);export{fl as default};
